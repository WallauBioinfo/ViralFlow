Bootstrap: docker
From: continuumio/miniconda3:4.7.12

%post
apt-get update -y && \
 apt-get install -y procps

CONDA_EXPERIMENTAL_SOLVER=classic conda install -n base conda=22.11.0
CONDA_EXPERIMENTAL_SOLVER=classic conda install -n base conda-libmamba-solver=22.12
conda config --set solver libmamba

conda install -c bioconda snpeff=5.0 entrez-direct --force-reinstall
apt-get clean
conda clean --all --yes
rm -rf /var/lib/apt/lists/* /usr/share/man /usr/share/doc /usr/share/locale
snpEff download NC_045512.2

%runscript
cd /
exec /bin/bash "$@"

%startscript
cd /
exec /bin/bash "$@"
